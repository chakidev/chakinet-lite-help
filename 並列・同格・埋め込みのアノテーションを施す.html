<!DOCTYPE html>
<html lang="ja">

  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="favicon.ico"/>
    <title>並列・同格・埋め込みのアノテーションを施す</title>
    <meta name="description" content="" />
    <meta name="keywords" content="">

      <!-- Bootstrap core CSS -->
      <link href="vendors/bootstrap-3.4.1/css/bootstrap.min.css" rel="stylesheet"/>

      <!-- JsTree styles -->
      <link href="vendors/jstree-3.3.10/themes/default/style.min.css" rel="stylesheet"/>

      <!-- Hnd styles -->
      <link href="css/layout.min.css" rel="stylesheet" />
      <link href="css/effects.min.css" rel="stylesheet" />
      <link href="css/theme-light-blue.min.css" rel="stylesheet" />
      <link href="css/print.min.css" rel="stylesheet" media="print" />
      <style type="text/css">nav { width: 350px} @media screen and (min-width:769px) { body.md-nav-expanded div#main { margin-left: 350px} body.md-nav-expanded header { padding-left: 364px} }</style>
      <style type="text/css">.navigation #inline-toc { width: auto !important}</style>

      <!-- Content style -->
      <link href="css/hnd.content.css" rel="stylesheet" />
      <link rel='stylesheet' type='text/css' href='css/chaki.css'>
</head>

<body class="md-nav-expanded">
  <header class="headroom">
    ChaKi.NET Lite ヘルプ
  </header>

  <nav id="panel-left" class="md-nav-expanded">
    <ul class="tab-tabs nav nav-tabs" role="tablist">
      <li id="nav-close">
        <button class="hnd-toggle btn btn-default">
          <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
        </button>
      </li>
      <li role="presentation" class="tab active">
        <a href="#contents" id="tab-contents" aria-controls="contents" role="tab" data-toggle="tab">
          <i class="glyphicon glyphicon-list"></i>
          Contents
        </a>
      </li>
    </ul>

    <div class="tab-content">
      <div role="tabpanel" class="tab-pane active" id="contents">
        <div id="toc" class="tree-container unselectable"></div>
      </div>
    </div>
  </nav>

  <div id="main">
    <article>
<div class="wiki-content">
  <p>ここでは、Dependencyパネルを用いて文に対していくつかの一般的なアノテーションを付与する方法について述べます。
</p>
  <h4 id="h4-.E5.9F.8B.E3.82.81.E8.BE.BC.E3.81.BF.28Nest.29.E3.82.A2.E3.83.8E.E3.83.86.E3.83.BC.E3.82.B7.E3.83.A7.E3.83.B3">埋め込み(Nest)アノテーション</h4>
  <p>Nestアノテーションは、埋め込み文、引用、注釈などの部分に付与するもので、文節と同じくSegment型のタグの一種です。
</p>
  <p>例として、「～と思って、」のような文の「～」の部分をNest Segmentにしてみます。Boxや線にヒットしない場所で例文の「本」の位置から「まぎらかそ/う」の位置までをマウス左ボタンドラッグにより囲みます。囲まれた部分の語Boxが赤枠により選択状態に変わります。
</p>
  <p>
    <img src="img/084.png" alt="084.png" id="emb-084.png-1" title="084.png" class="embed-image" width="655" height="150" />
</p>
  <p>ドラッグを終えると、次のようなメニューがポップアップしますので、"Create 'Nest' Segment"を選択します。これで選択範囲にNest Segmentが付与されます。
</p>
  <p>
    <img src="img/085.png" alt="085.png" id="emb-085.png-1" title="085.png" class="embed-image" width="392" height="168" />
</p>
  <p>Nest Segmentができると、その部分にはSegmentを示す青色の矩形が表示されるようになります。これがSegmentのアノテーションです（枠の色はSegmentのTagの種類によって変わります）。
</p>
  <p>
    <img src="img/086.png" alt="086.png" id="emb-086.png-1" title="086.png" class="embed-image" width="576" height="142" />
</p>
  <p>付与したアノテーションは文節・係り受け編集と同じくUndo/Redoの対象になります。Save操作を行うことでDBに反映されます。
</p>
  <p>作成したアノテーションは、範囲内でマウス<strong>右</strong>クリックして選択状態（下図）にした上で、コンテクストメニューから"Delete Segment"をクリックすれば削除できます。
</p>
  <p>
    <img src="img/087.png" alt="087.png" id="emb-087.png-1" title="087.png" class="embed-image" width="524" height="124" />
</p>
  <h4 id="h4-.E3.82.A2.E3.83.8E.E3.83.86.E3.83.BC.E3.82.B7.E3.83.A7.E3.83.B3.E3.81.AE.E7.B8.AE.E9.80.80.E8.A1.A8.E7.A4.BA">アノテーションの縮退表示</h4>
  <p>削除の場合と同様にSegmentを選択して、メニューから"Abridge"をクリックすると、そのSegmentの範囲が縮退表示されます。これは、長いNest Segmentなどを短く見せて、文全体の構造を把握しやすくするために提供される機能です。表示上だけの一時的な形態ですので、セーブはされません。また、縮退した部分には、緑色のボタンが代わりに置かれます（ボタンの上にマウスを持っていくと省略された部分のテキストを<a href="ToolTip.html">ToolTip</a>として見ることができます）。このボタンをクリックすると非縮退状態に戻ります。
</p>
  <p>
    <img src="img/088.png" alt="088.png" id="emb-088.png-1" title="088.png" class="embed-image" width="324" height="124" />
</p>
  <h4 id="h4-.E3.82.A2.E3.83.8E.E3.83.86.E3.83.BC.E3.82.B7.E3.83.A7.E3.83.B3.E3.81.B8.E3.81.AE.E3.82.B3.E3.83.A1.E3.83.B3.E3.83.88.E4.BB.98.E4.B8.8E">アノテーションへのコメント付与</h4>
  <p>削除の場合と同様にSegmentを選択して、メニューから"Edit Comment..."をクリックすると、コメントを入力するための下図のようなダイアログが表示されます。ここにコメントを入力して"OK"を押すとSegmentに対してコメントが付与されます。
</p>
  <p>
    <img src="img/089.png" alt="089.png" id="emb-089.png-1" title="089.png" class="embed-image" width="608" height="276" />
</p>
  <h4 id="h4-.E5.90.8C.E6.A0.BC.E3.83.BB.E4.B8.A6.E5.88.97.E3.82.A2.E3.83.8E.E3.83.86.E3.83.BC.E3.82.B7.E3.83.A7.E3.83.B3">同格・並列アノテーション</h4>
  <p>次は、同格(Apposition)・並列(Parallel)のアノテーションを行う方法を示します。これらは単純なSegmentではなく、Segmentと同時にGroupも生成される点が Nest Segment と異なります。アノテーションは２段階で行われます。
</p>
  <ol>
    <li>範囲を選択してSegmentを作成し、同時にそのSegmentを最初の要素とするGroupを作成する。
</li>
    <li>範囲を選択してSegmentを作成し、同時にそのSegmentを既存のGroupに追加する。
</li>
  </ol>
  <p>手順2は繰り返し行うことができます。
</p>
  <p>具体例として、「ああいう姿勢や、こういう乱雑な鼓だとか、鎧だとか、虎の皮だとかいう周囲のものが」という部分に対して並列アノテーションを付与することを考えます。
</p>
  <p>まず、「鼓」という部分を Nest Segment のときと同様に選択して、メニューから"Create New Group"をクリックします。これにより新しい、Apposition Segment とそれを含む Apposition Group が生成されます。Apposition Segmentは緑色の矩形で示され、Groupはその内部を既定色で塗り潰すことで示されます（同じGroupは同じ塗り潰し色となります）。作成したいのはParallelなので、そのSegment上でコンテクストメニューを表示させ、"Change to Parallel"をクリックして、Parallel Segment / Group に変更します。（このあたりの操作法は変更される可能性があります。）
</p>
  <p>
    <img src="img/090.png" alt="090.png" id="emb-090.png-1" title="090.png" class="embed-image" width="224" height="84" />
</p>
  <p>次に、「鎧」の部分を選択して、メニューから"Add to Group-1"をクリックします。これにより新しい Parallel Segment が作成され、第1番に作成されたGroup、つまり「鼓」と同じ Parallel Group に追加されます。<br />
同様にして、「虎の皮」の部分も同じGroupに追加します。これで３つのSegmentが同じ並列句としてマークされたことになります。
</p>
  <p>
    <img src="img/091.png" alt="091.png" id="emb-091.png-1" title="091.png" class="embed-image" width="528" height="106" />
</p>
  <p>Segment単位の削除、コメントの付加は、Nestの場合と同様に行うことができます。Abridgeは、Groupのカバーする範囲全体の縮退表示となります。
</p>
  <p>同様に複数のGroupを生成した結果としてできる、この部分の最終的なアノテーションを下図に示します。ここにあるように、Segment同士は範囲の重複や包含があっても構いません。
</p>
  <p>
    <img src="img/092.png" alt="092.png" id="emb-092.png-1" title="092.png" class="embed-image" width="1178" height="166" />
</p>
  <h4 id="h4-.E6.B3.A8.E6.84.8F.E7.82.B9">注意点</h4>
  <ul>
    <li>これら一般的なアノテーションは、Document内の文字位置に対して付与されるため、文節の切断・結合と無関係に文字に追随する形で保持されます。
</li>
  </ul>
  <ul>
    <li>Segment矩形は、範囲に含まれる単語Boxをすべて包含する矩形として計算されるため、Diagonal表示を選択している場合には必ずしも終端文字の所で終わっているとは限りません。（文節単位でSegmentを作成した場合はこの問題はありません。）
</li>
  </ul>
  <ul>
    <li>これらのアノテーションはCabocha形式では表現できませんので、Cabochaエクスポート時には独自の拡張形式で出力されます。
</li>
  </ul>
  <h4 id="h4-.E3.82.AB.E3.82.B9.E3.82.BF.E3.83.A0Group">カスタムGroup</h4>
  <p>標準で定義される"Parallel", "Apposition"以外に、TagSetDefinitionEditor により任意のGroupタグを定義・付加することができます。
<strong>その際、Groupタグの名称と同じ名前のSegmentを一緒に定義しなければなりません。</strong>（例えば、"Custom"というGroupタグ定義を追加したら、"Custom"という名前のSegmentタグ定義も追加する。）このため、既にSegmentタグ名として使われている名称をGroupの名称に使用することはできません。</p>
</div>
        <hr>
        <div id="topic_footer">
          <div id="topic_footer_content">Copyright &copy; 2022 by Sowa Research Co., Ltd.. All Rights Reserved.</div>
        </div>
      </article>

      <footer></footer>

    </div>
  
    <script src="vendors/jquery-3.5.1/jquery.min.js"></script>
    <script src="vendors/bootstrap-3.4.1/js/bootstrap.min.js"></script>
    <script src="vendors/bootstrap-3.4.1/js/ie10-viewport-bug-workaround.js"></script>
    <script src="vendors/jstree-3.3.10/jstree.min.js"></script>

    <script>
      $(function() {
        $('#toc').jstree({
          'core' : {
            'data' : {
              'url' : 'toc.html',
              'data' : function (node) { return { 'id' : node.id }; }
            }
          }
        });
      });
    </script>
  </body>
</html>
